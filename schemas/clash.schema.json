{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.subbox.dev/clash.schema.json",
  "version": "1.0.0",
  "title": "Clash Configuration Schema",
  "description": "Schema for Clash client configuration validation",
  "type": "object",
  "properties": {
    "port": {
      "type": "integer",
      "minimum": 1,
      "maximum": 65535,
      "default": 7890,
      "description": "HTTP proxy port"
    },
    "socks-port": {
      "type": "integer",
      "minimum": 1,
      "maximum": 65535,
      "default": 7891,
      "description": "SOCKS5 proxy port"
    },
    "mixed-port": {
      "type": "integer",
      "minimum": 1,
      "maximum": 65535,
      "description": "Mixed proxy port"
    },
    "allow-lan": {
      "type": "boolean",
      "default": false,
      "description": "Allow connections from LAN"
    },
    "mode": {
      "type": "string",
      "enum": ["rule", "global", "direct"],
      "default": "rule",
      "description": "Proxy mode"
    },
    "log-level": {
      "type": "string",
      "enum": ["info", "warning", "error", "debug", "silent"],
      "default": "info",
      "description": "Log level"
    },
    "external-controller": {
      "type": "string",
      "default": "127.0.0.1:9090",
      "description": "External controller address"
    },
    "secret": {
      "type": "string",
      "description": "Secret for external controller"
    },
    "proxies": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Proxy name"
          },
          "type": {
            "type": "string",
            "enum": ["ss", "ssr", "vmess", "trojan", "snell", "http", "socks5"],
            "description": "Proxy type"
          },
          "server": {
            "type": "string",
            "description": "Server address"
          },
          "port": {
            "type": "integer",
            "minimum": 1,
            "maximum": 65535,
            "description": "Server port"
          },
          "cipher": {
            "type": "string",
            "description": "Encryption method (for shadowsocks)"
          },
          "password": {
            "type": "string",
            "description": "Password"
          },
          "uuid": {
            "type": "string",
            "description": "UUID (for vmess/trojan)"
          },
          "alterId": {
            "type": "integer",
            "description": "Alter ID (for vmess)"
          },
          "tls": {
            "type": "boolean",
            "description": "Enable TLS"
          },
          "skip-cert-verify": {
            "type": "boolean",
            "description": "Skip certificate verification"
          },
          "servername": {
            "type": "string",
            "description": "Server name for TLS"
          },
          "network": {
            "type": "string",
            "enum": ["tcp", "ws", "http", "quic"],
            "description": "Network type"
          },
          "ws-opts": {
            "type": "object",
            "properties": {
              "path": {
                "type": "string",
                "description": "WebSocket path"
              },
              "headers": {
                "type": "object",
                "description": "WebSocket headers"
              }
            }
          },
          "http-opts": {
            "type": "object",
            "properties": {
              "method": {
                "type": "string",
                "description": "HTTP method"
              },
              "path": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "HTTP path"
              },
              "headers": {
                "type": "object",
                "description": "HTTP headers"
              }
            }
          }
        },
        "required": ["name", "type", "server", "port"]
      }
    },
    "proxy-groups": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Group name"
          },
          "type": {
            "type": "string",
            "enum": ["select", "url-test", "fallback", "load-balance"],
            "description": "Group type"
          },
          "proxies": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Proxy names in this group"
          },
          "url": {
            "type": "string",
            "description": "Test URL for url-test/fallback"
          },
          "interval": {
            "type": "integer",
            "description": "Test interval in seconds"
          },
          "tolerance": {
            "type": "integer",
            "description": "Tolerance for url-test"
          }
        },
        "required": ["name", "type", "proxies"]
      }
    },
    "rules": {
      "type": "array",
      "items": {
        "type": "string",
        "description": "Routing rules"
      }
    }
  }
} 