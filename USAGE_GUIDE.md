# SboxAgent - Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ (Phase 2)

## ðŸŽ¯ Ð§Ñ‚Ð¾ ÑƒÐ¼ÐµÐµÑ‚ SboxAgent Ð½Ð° Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚

SboxAgent Phase 2 - ÑÑ‚Ð¾ Ð¿Ð¾Ð»Ð½Ð¾Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð´ÐµÐ¼Ð¾Ð½ Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑÐ¼Ð¸ Ð¿Ñ€Ð¾ÐºÑÐ¸-ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð². Ð’Ð¾Ñ‚ Ñ‡Ñ‚Ð¾ Ð¾Ð½ Ð¼Ð¾Ð¶ÐµÑ‚ Ð´ÐµÐ»Ð°Ñ‚ÑŒ:

### âœ… ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

1. **Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹**
   - Ð˜Ð· JSON Ñ„Ð°Ð¹Ð»Ð¾Ð²
   - Ð§ÐµÑ€ÐµÐ· sboxmgr CLI Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ°Ð¼Ð¸
   - Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹
   - ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° sing-box, clash, xray, mihomo

2. **Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ sboxmgr**
   - Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹
   - Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹
   - Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ñ… ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²
   - Retry Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº

3. **Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ systemd ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸**
   - Enable/disable ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
   - Start/stop/restart Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
   - ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
   - ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ Ð¸ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼Ñ‹

4. **ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸**
   - Ð¡Ð±Ð¾Ñ€ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ñ… Ð¼ÐµÑ‚Ñ€Ð¸Ðº
   - Ð¡Ð±Ð¾Ñ€ Ð¼ÐµÑ‚Ñ€Ð¸Ðº ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
   - Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹
   - ÐžÑ‚Ñ‡ÐµÑ‚Ñ‹ Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ

5. **ÐžÑ€ÐºÐµÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ**
   - Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¶Ð¸Ð·Ð½ÐµÐ½Ð½Ñ‹Ð¼ Ñ†Ð¸ÐºÐ»Ð¾Ð¼ Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
   - Graceful shutdown
   - ÐÐ³Ñ€ÐµÐ³Ð°Ñ†Ð¸Ñ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°

## ðŸš€ ÐšÐ°Ðº Ð½Ð°Ñ‡Ð°Ñ‚ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ

### 1. Ð¡Ð±Ð¾Ñ€ÐºÐ°

```bash
# ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ ÑÐ±Ð¾Ñ€ÐºÐ°
git clone https://github.com/kpblcaoo/sboxagent.git
cd sboxagent
make build
```

### 2. Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» `agent.yaml`:

```yaml
agent:
  name: "sboxagent"
  version: "0.1.0"
  log_level: "info"

services:
  cli:
    enabled: true
    sboxmgr_path: "sboxmgr"
    timeout: "30s"
    max_retries: 3
    retry_interval: "5s"
  
  systemd:
    enabled: true
    service_name: "sboxagent"
    user_mode: false
    auto_start: true
  
  monitoring:
    enabled: true
    interval: "30s"
    metrics_enabled: true
    alerts_enabled: true
    retention_days: 30
```

### 3. Ð—Ð°Ð¿ÑƒÑÐº

```bash
# Ð—Ð°Ð¿ÑƒÑÐº Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÐµÐ¹
./sboxagent -config agent.yaml

# Ð—Ð°Ð¿ÑƒÑÐº Ñ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼Ð¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ
./sboxagent
```

## ðŸ“– ÐŸÑ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

### Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ sing-box
cat > config.json << EOF
{
  "log": {"level": "info"},
  "inbounds": [
    {
      "type": "mixed",
      "tag": "mixed-in",
      "listen": "127.0.0.1",
      "listen_port": 7890
    }
  ],
  "outbounds": [
    {
      "type": "direct",
      "tag": "direct"
    }
  ]
}
EOF

# Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ
curl -X POST http://localhost:8080/api/v1/config/import \
  -H "Content-Type: application/json" \
  -d '{
    "file_path": "./config.json",
    "client_type": "sing-box"
  }'
```

### Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ñ‡ÐµÑ€ÐµÐ· sboxmgr

```bash
# Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¾Ð¹
curl -X POST http://localhost:8080/api/v1/config/import \
  -H "Content-Type: application/json" \
  -d '{
    "subscription_url": "https://your-subscription-url.com/sub",
    "client_type": "sing-box",
    "options": {
      "exclude": "reject,blocked",
      "include": "auto"
    }
  }'
```

### Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ systemd ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸

```bash
# Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÐ°
curl -X POST http://localhost:8080/api/v1/systemd/enable

# Ð—Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ°
curl -X POST http://localhost:8080/api/v1/systemd/start

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
curl http://localhost:8080/api/v1/systemd/status

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²Ð¸ÑÐ°
curl -X POST http://localhost:8080/api/v1/systemd/stop

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ°
curl -X POST http://localhost:8080/api/v1/systemd/restart
```

### ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸

```bash
# ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÑ‚Ñ€Ð¸Ðº
curl http://localhost:8080/api/v1/monitor/metrics

# ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹
curl http://localhost:8080/api/v1/monitor/alerts

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÑ
curl http://localhost:8080/api/v1/monitor/health

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹
curl -X POST http://localhost:8080/api/v1/monitor/alerts/clear
```

### Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð°Ð³ÐµÐ½Ñ‚Ð° Ð¸ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²

```bash
# ÐžÐ±Ñ‰Ð¸Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð°Ð³ÐµÐ½Ñ‚Ð°
curl http://localhost:8080/api/v1/status

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ CLI ÑÐµÑ€Ð²Ð¸ÑÐ°
curl http://localhost:8080/api/v1/services/cli/status

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ systemd ÑÐµÑ€Ð²Ð¸ÑÐ°
curl http://localhost:8080/api/v1/services/systemd/status

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°
curl http://localhost:8080/api/v1/services/monitor/status
```

## âš™ï¸ ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

### ÐŸÐ¾Ð»Ð½Ð°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

```yaml
agent:
  name: "sboxagent"
  version: "0.1.0"
  log_level: "info"

server:
  port: 8080
  host: "127.0.0.1"
  timeout: "30s"

services:
  cli:
    enabled: true
    sboxmgr_path: "sboxmgr"
    timeout: "30s"
    max_retries: 3
    retry_interval: "5s"
  
  systemd:
    enabled: true
    service_name: "sboxagent"
    user_mode: false
    auto_start: true
  
  monitoring:
    enabled: true
    interval: "30s"
    metrics_enabled: true
    alerts_enabled: true
    retention_days: 30

clients:
  sing-box:
    enabled: true
    binary_path: "/usr/local/bin/sing-box"
    config_path: "/etc/sing-box/config.json"
  
  clash:
    enabled: true
    binary_path: "/usr/local/bin/clash"
    config_path: "/etc/clash/config.yaml"
  
  xray:
    enabled: true
    binary_path: "/usr/local/bin/xray"
    config_path: "/etc/xray/config.json"

logging:
  stdout_capture: true
  aggregation: true
  retention_days: 30
  max_entries: 1000

security:
  allow_remote_api: false
  allowed_hosts: ["127.0.0.1", "::1"]
  tls_enabled: false
```

### ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

```bash
# ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
export SBOXAGENT_AGENT_NAME="my-agent"
export SBOXAGENT_AGENT_VERSION="0.1.0"
export SBOXAGENT_AGENT_LOG_LEVEL="debug"

# Ð¡ÐµÑ€Ð²ÐµÑ€
export SBOXAGENT_SERVER_PORT=9090
export SBOXAGENT_SERVER_HOST="0.0.0.0"

# CLI ÑÐµÑ€Ð²Ð¸Ñ
export SBOXAGENT_SERVICES_CLI_ENABLED=true
export SBOXAGENT_SERVICES_CLI_SBOXMGR_PATH="/usr/local/bin/sboxmgr"
export SBOXAGENT_SERVICES_CLI_TIMEOUT="60s"

# Systemd ÑÐµÑ€Ð²Ð¸Ñ
export SBOXAGENT_SERVICES_SYSTEMD_ENABLED=true
export SBOXAGENT_SERVICES_SYSTEMD_SERVICE_NAME="my-service"
export SBOXAGENT_SERVICES_SYSTEMD_USER_MODE=true

# ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³
export SBOXAGENT_SERVICES_MONITORING_ENABLED=true
export SBOXAGENT_SERVICES_MONITORING_INTERVAL="1m"
```

## ðŸ”§ Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¸ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°

### Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# Ð—Ð°Ð¿ÑƒÑÐº Ñ debug ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¼
./sboxagent -config agent.yaml -log-level debug

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
tail -f /var/log/sboxagent.log
```

### Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

```bash
# Unit Ñ‚ÐµÑÑ‚Ñ‹
go test ./...

# Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹
go test ./tests/integration/...

# Smoke Ñ‚ÐµÑÑ‚Ñ‹
go test ./tests/smoke_test.go
```

### ÐžÑ‚Ð»Ð°Ð´ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
./sboxagent -config agent.yaml -validate-only

# Ð’Ñ‹Ð²Ð¾Ð´ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ
./sboxagent -print-default-config
```

## ðŸ“Š ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸

SboxAgent ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÑ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸:

- **Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸**:
  - Uptime Ð°Ð³ÐµÐ½Ñ‚Ð°
  - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð°Ð¼ÑÑ‚Ð¸
  - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ CPU
  - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¸ÑÐºÐ°

- **Ð¡ÐµÑ€Ð²Ð¸ÑÐ½Ñ‹Ðµ Ð¼ÐµÑ‚Ñ€Ð¸ÐºÐ¸**:
  - Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²
  - Ð’Ñ€ÐµÐ¼Ñ Ð¾Ñ‚ÐºÐ»Ð¸ÐºÐ°
  - ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð¾ÑˆÐ¸Ð±Ð¾Ðº

- **ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ**:
  - Response times
  - Throughput
  - Error rates

### ÐžÐ¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ñ

Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹ Ñ ÑƒÑ€Ð¾Ð²Ð½ÑÐ¼Ð¸:

- **INFO**: Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
- **WARNING**: ÐŸÑ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ
- **ERROR**: ÐžÑˆÐ¸Ð±ÐºÐ¸
- **CRITICAL**: ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸

### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¾Ð¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ð¹

```json
{
  "id": "alert-001",
  "level": "WARNING",
  "message": "High memory usage detected",
  "timestamp": "2025-06-28T15:30:00Z",
  "data": {
    "memory_usage": "85%",
    "threshold": "80%"
  }
}
```

## ðŸ”’ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

### Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

1. **Ð—Ð°Ð¿ÑƒÑÐº Ð¿Ð¾Ð´ Ð½ÐµÐ¿Ñ€Ð¸Ð²Ð¸Ð»ÐµÐ³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¼**:
   ```bash
   sudo useradd -r -s /bin/false sboxagent
   sudo chown sboxagent:sboxagent /etc/sboxagent/
   ```

2. **ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº API**:
   ```yaml
   security:
     allow_remote_api: false
     allowed_hosts: ["127.0.0.1"]
   ```

3. **TLS Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°**:
   ```yaml
   security:
     tls_enabled: true
     tls_cert_file: "/etc/sboxagent/cert.pem"
     tls_key_file: "/etc/sboxagent/key.pem"
   ```

## ðŸš¨ Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹

1. **sboxmgr Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½**:
   ```bash
   # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿ÑƒÑ‚ÑŒ Ðº sboxmgr
   which sboxmgr
   
   # Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ sboxmgr
   pip install sboxmgr
   ```

2. **Permission denied Ð´Ð»Ñ systemd**:
   ```bash
   # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ñ€Ð°Ð²Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
   sudo usermod -aG systemd sboxagent
   ```

3. **ÐŸÐ¾Ñ€Ñ‚ ÑƒÐ¶Ðµ Ð·Ð°Ð½ÑÑ‚**:
   ```bash
   # Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¿Ð¾Ñ€Ñ‚ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸
   server:
     port: 8081
   ```

### Ð›Ð¾Ð³Ð¸ Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸

```bash
# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Ð°Ð³ÐµÐ½Ñ‚Ð°
journalctl -u sboxagent -f

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² systemd
journalctl -u sboxagent.service

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° ÑÐµÑ€Ð²Ð¸ÑÐ°
systemctl status sboxagent
```

## ðŸ“š Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹

- [Phase 2 Implementation Summary](PHASE2_IMPLEMENTATION_SUMMARY.md)
- [Configuration Reference](docs/configuration.md)
- [API Documentation](docs/api.md)
- [Architecture Guide](docs/architecture.md)

## ðŸ¤ ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

Ð•ÑÐ»Ð¸ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹:

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ [Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ](docs/)
2. ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ [Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñ‹](examples/)
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ [issue](https://github.com/kpblcaoo/sboxagent/issues)

---

**Phase 2 Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ!** ðŸŽ‰ 